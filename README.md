# ClarabelBenchmarks
Benchmark tests for Clarabel solver

### Usage 

To run one of the benchmark tests you should execute the appropriate script in `./src/benchmarks`, e.g.
```julia 
include("bench_maros.jl")
```

If the benchmark has previously been run then the script will load results from `./src/benchmarks/results`.   If it has not been run before, or if new solvers have been added to the list of benchmarks for the test, then the data will be generated by running each solver that has not already been tested.   

Either way, you will get a DataFrame object called `df` in the REPL.   To get a performance plot you can then run 
```julia
ClarabelBenchmarks.performance_plot(df)
``` 

### Adding new problems 

Problems are grouped in folders under the `./src/problem_sets` directory.   Additional problems for standard types, e.g. new LP/QP/SOCPs etc, can be defined within new files in subdirectories of the `problem_sets`.   All such problems should be added using the  `@add_problem` macro and defined (but not solved) using JuMP.


### Solving single problems 
Function pointers for all problems in the collection are available in `ClarabelBenchmarks.PROBLEMS`.   This is a Dict object with keys matching the problem classes defined in the `problem_sets`, e.g. `ClarabelBenchmarks.PROBLEMS["maros"]` gives a Dict of function pointers for the Maros problem set.  Individual problems can be solved like so:

```julia
model = Model(Clarabel.Optimizer)
ClarabelBenchmarks.PROBLEMS["maros"]["maros_AUG2D"](model)
```


### Building the Julia wrapper for the Rust implementation of Clarabel (i.e. ClarabelRs)

The Rust implementation comes with an (undocumented) interface to Julia for benchmarking. It can be built via `cargo` in the Rust repository using 
```
cargo build --features --julia
```

You will also need to manually add the `ClarabelRs` package to your Julia environment.  It lives in the `Clarabel.rs` github repository in `<repo>/src/julia/ClarabelRs`.   

Once you have done both of the above then you call the Rust version of the solver in the same way as the Julia version, e.g.
```
using JuMP, ClarabelRs
model = Model(ClarabelRs.Optimizer)
.....
```